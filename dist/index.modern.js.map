{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["/**\n * Convert HTML to JSON or Object\n * @author Yousuf Kalim\n */\n\n/**\n * @param element The HTML string or element to convert to JSON.\n * @param json A boolean to indicate if the output should be a JSON string.\n * @returns {Promise<unknown>}\n */\nfunction HTMLParser(element, json = false) {\n  return new Promise((resolve, reject) => {\n    try {\n      let treeObject = {};\n      let parser;\n      let docNode;\n\n      // If string convert to document Node\n      if (typeof element === 'string') {\n        parser = new DOMParser();\n        docNode = parser.parseFromString(element, 'text/xml');\n        element = docNode.firstChild;\n      }\n\n      //Recursively loop through DOM elements and assign properties to object\n      const treeHTML = (element, object) => {\n        object['type'] = element.nodeName;\n        let nodeList = element.childNodes;\n        if (nodeList !== null) {\n          if (nodeList.length) {\n            object['content'] = [];\n            for (let i = 0; i < nodeList.length; i++) {\n              if (nodeList[i].nodeType === 3) {\n                object['content'].push(nodeList[i].nodeValue);\n              } else {\n                object['content'].push({});\n                treeHTML(nodeList[i], object['content'][object['content'].length - 1]);\n              }\n            }\n          }\n        }\n        if (element.attributes !== null) {\n          if (element.attributes.length) {\n            object['attributes'] = {};\n            for (let i = 0; i < element.attributes.length; i++) {\n              object['attributes'][element.attributes[i].nodeName] =\n                element.attributes[i].nodeValue;\n            }\n          }\n        }\n      };\n\n      treeHTML(element, treeObject);\n\n      resolve(json ? JSON.stringify(treeObject) : treeObject);\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nexport default HTMLParser;\n"],"names":["HTMLParser","element","json","Promise","resolve","reject","parser","DOMParser","docNode","parseFromString","firstChild","object","nodeName","nodeList","childNodes","length","i","nodeType","push","nodeValue","treeHTML","attributes","treeObject","JSON","stringify","e"],"mappings":"AAUA,SAAmBA,EAACC,EAASC,GAAO,GAClC,OAAO,IAAWC,QAAC,CAACC,EAASC,KAC3B,IACE,IACIC,MADa,CAAA,EAKM,iBAAZL,IACTK,EAAS,IAAeC,UACxBC,EAAUF,EAAOG,gBAAgBR,EAAS,YAC1CA,EAAUO,EAAQE,YAIpB,QAAiB,CAACT,EAASU,KACzBA,EAAa,KAAIV,EAAQW,SACzB,IAAIC,EAAWZ,EAAQa,WACvB,GAAiB,OAAbD,GACEA,EAASE,OAAQ,CACnBJ,EAAgB,QAAI,GACpB,IAAK,IAAKK,EAAG,EAAGA,EAAIH,EAASE,OAAQC,IACN,IAAzBH,EAASG,GAAGC,SACdN,EAAgB,QAAEO,KAAKL,EAASG,GAAGG,YAEnCR,EAAgB,QAAEO,KAAK,CAAA,GACvBE,EAASP,EAASG,GAAIL,EAAgB,QAAEA,EAAgB,QAAEI,OAAS,IAGzE,CAEF,GAA2B,OAAvBd,EAAQoB,YACNpB,EAAQoB,WAAWN,OAAQ,CAC7BJ,EAAmB,WAAI,CAAA,EACvB,IAAK,IAAIK,EAAI,EAAGA,EAAIf,EAAQoB,WAAWN,OAAQC,IAC7CL,EAAmB,WAAEV,EAAQoB,WAAWL,GAAGJ,UACzCX,EAAQoB,WAAWL,GAAGG,SAE5B,CACF,EAGFC,EAASnB,EAASqB,GAElBlB,EAAQF,EAAOqB,KAAKC,UAAUF,GAAcA,EAG9C,CAFE,MAAOG,GACPpB,EAAOoB,EACT,GAEJ"}